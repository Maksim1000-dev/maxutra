<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maxutra Messenger</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="authScreen" class="screen active">
        <div class="auth-container">
            <div class="logo">
                <h1>üí¨ Maxutra</h1>
                <p>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å –ø–∞—Ä–æ–ª—è–º–∏</p>
            </div>
            
            <div class="auth-form">
                <div class="input-group">
                    <input type="text" id="usernameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
                    <div id="passwordGroup" class="password-group" style="display: none;">
                        <input type="password" id="passwordInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        <input type="password" id="confirmPasswordInput" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" style="display: none;">
                    </div>
                </div>
                
                <div class="auth-buttons">
                    <button id="startBtn" onclick="checkUsername()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                    <button id="loginBtn" onclick="handleAuth()" style="display: none;">–í–æ–π—Ç–∏</button>
                    <button id="registerBtn" onclick="handleAuth()" style="display: none;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </div>
                
                <div id="authMessage" class="auth-message"></div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —á–∞—Ç–∞ -->
    <div id="chatScreen" class="screen">
        <div class="chat-container">
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3>üë• –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div class="user-info">
                        <span id="currentUserName"></span>
                        <button onclick="logout()" class="logout-btn">üö™</button>
                    </div>
                </div>
                
                <div class="search-container">
                    <input type="text" id="userSearch" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º –¥–ª—è –ø–æ–∏—Å–∫–∞...">
                    <button onclick="searchUser()">üîç –ù–∞–π—Ç–∏</button>
                </div>
                
                <div id="searchResults" class="search-results"></div>
                
                <div id="chatsList" class="chats-list">
                    <h4>üí¨ –ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã</h4>
                    <div id="activeChats"></div>
                </div>
            </div>

            <div class="chat-area">
                <div class="chat-header">
                    <div id="chatWithInfo">
                        <div class="chat-avatar">üë§</div>
                        <div>
                            <div id="chatWithName">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞</div>
                            <div class="chat-status">offline</div>
                        </div>
                    </div>
                </div>

                <!-- –ó–æ–Ω–∞ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ -->
                <div id="dropZone" class="drop-zone" style="display: none;">
                    <div class="drop-content">
                        <h3>üì¶ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</h3>
                        <p>–ú–∞–∫—Å–∏–º—É–º 300 –ú–ë</p>
                    </div>
                </div>

                <div id="messagesContainer" class="messages-container">
                    <div class="welcome-message">
                        <h3>üí¨ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Maxutra!</h3>
                        <p>–ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–∏–∫–Ω–µ–π–º—É —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
                    </div>
                </div>
                
                <div class="message-input-container">
                    <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." disabled>
                    <button onclick="sendMessage()" disabled>üì§</button>
                </div>

                <div id="callControls" class="call-controls" style="display: none; padding: 15px; background: #f8f9fa; border-top: 1px solid #e0e0e0; text-align: center; gap: 10px; display: flex; justify-content: center; align-items: center;">
                    <button id="muteMicBtn" class="call-btn" onclick="toggleMic()" title="–í—ã–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω">üéôÔ∏è</button>
                    <button id="muteSpeakerBtn" class="call-btn" onclick="toggleSpeaker()" title="–û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞">üîä</button>
                    <button id="endCallBtn" class="call-btn end-call" onclick="endCall()" title="–ü–æ–≤–µ—Å–∏—Ç—å —Ç—Ä—É–±–∫—É">üìû</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="chat.js"></script>
</body>
</html>
